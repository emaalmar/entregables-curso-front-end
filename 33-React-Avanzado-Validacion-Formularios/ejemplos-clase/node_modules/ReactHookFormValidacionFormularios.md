React Hook Form y Validación de formularios avanzando
El manejo de formularios en aplicaciones React puede ser un proceso complejo y propenso a errores si no se utiliza una solución eficiente. React Hook Form (RHF) es una biblioteca que permite gestionar formularios de manera sencilla, optimizada y con una integración fluida con bibliotecas de validación como Yup y Zod.

En esta lectura, exploraremos cómo utilizar React Hook Form para manejar formularios y aplicar validaciones avanzadas, asegurando una experiencia de usuario intuitiva y eficiente.

1. Instalación y Configuración Básica
Para comenzar a utilizar React Hook Form, primero instalamos la biblioteca:

npm install react-hook-form
Ahora, podemos utilizarlo en un componente:

import { useForm } from "react-hook-form";

const BasicForm = () => {
  const { register, handleSubmit } = useForm();

  const onSubmit = (data) => {
    console.log(data);
  };

  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("username")} placeholder="Usuario" />
      <button type="submit">Enviar</button>
    </form>
  );
};

export default BasicForm;
2. Validación con React Hook Form
React Hook Form proporciona validación integrada utilizando reglas como required, minLength, maxLength, entre otras.

Ejemplo con reglas básicas:

const { register, handleSubmit, formState: { errors } } = useForm();

<form onSubmit={handleSubmit(onSubmit)}>

  <input {...register("email", { required: "El email es obligatorio", pattern: { value: /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/, message: "Formato inválido" } })} />

  {errors.email && <p>{errors.email.message}</p>}

  <button type="submit">Enviar</button>

</form>
3. Validación Avanzada con Yup
Para realizar validaciones más complejas, podemos usar Yup, una biblioteca que permite definir esquemas de validación.

Instalación de Yup y Resolver
npm install @hookform/resolvers yup
Integración de Yup con React Hook Form
import { useForm } from "react-hook-form";
import { yupResolver } from "@hookform/resolvers/yup";
import * as yup from "yup";

const schema = yup.object({
  username: yup.string().required("El usuario es obligatorio"),
  email: yup.string().email("Email no válido").required("El email es obligatorio"),
}).required();

const FormWithYup = () => {
  const { register, handleSubmit, formState: { errors } } = useForm({
    resolver: yupResolver(schema),
  });

  return (
    <form onSubmit={handleSubmit((data) => console.log(data))}>
      <input {...register("username")} placeholder="Usuario" />
      {errors.username && <p>{errors.username.message}</p>}

      <input {...register("email")} placeholder="Email" />
      {errors.email && <p>{errors.email.message}</p>}

      <button type="submit">Enviar</button>
    </form>
  );
};

export default FormWithYup;
4. Manejo de Errores y Mensajes Personalizados
Podemos manejar errores y mostrar mensajes personalizados utilizando errors del formState.

{errors.email && <p style={{ color: "red" }}>{errors.email.message}</p>}
Para mostrar errores globales:

const { setError } = useForm();

setError("email", { type: "manual", message: "Este email ya está en uso" });
5. Validación Asíncrona y Personalizada
Podemos hacer validaciones asíncronas, por ejemplo, verificando si un nombre de usuario ya está registrado en una API:

const { register, handleSubmit, formState: { errors } } = useForm();

const validateUsername = async (value) => {
  const response = await fetch(`/api/check-username?username=${value}`);
  const data = await response.json();
  return data.exists ? "Este usuario ya está en uso" : true;
};

<input {...register("username", { validate: validateUsername })} placeholder="Usuario" />

{errors.username && <p>{errors.username.message}</p>}
Casos de Uso en el Mundo Real
Formularios de autenticación: Registro y login con validaciones de usuario y contraseña seguras.
Formularios de pago: Validación de tarjetas de crédito y datos personales.
Formularios de encuestas o feedback: Validaciones según las respuestas del usuario.
Conclusión
React Hook Form simplifica el manejo de formularios en React, optimizando el rendimiento y facilitando la validación con bibliotecas como Yup. Su enfoque basado en referencias y validación declarativa lo convierte en una excelente opción para formularios escalables y mantenibles.

Bibliografía y Recursos Adicionales
React Hook Form - Documentación Oficial
Yup - Documentación Oficial
React Hook Form con Yup - Ejemplo